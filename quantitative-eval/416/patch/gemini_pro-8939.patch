 
    
    --- gemini_pro-8939.c
    +++ gemini_pro-8939-fixed.c
    @@ -64,6 +64,7 @@
             pthread_t thread;
             int *client_sock_copy = malloc(sizeof(int));
             if (client_sock_copy == NULL) {
    +            close(client_sock);
                 perror("Error allocating memory");
                 close(client_sock);
                 continue;
    @@ -67,7 +68,7 @@
             }
 
             *client_sock_copy = client_sock;
             if (pthread_create(&thread, NULL, handle_client, (void *)client_sock_copy) != 0) {
                 perror("Error creating thread");
    +            free(client_sock_copy);
                 close(client_sock);
                 continue;
             }
    
    