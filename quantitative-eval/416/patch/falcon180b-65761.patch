
    
    --- falcon180b-65761.c 
    +++ falcon180b-65761-fixed.c
    @@ -48,7 +48,8 @@
             if (num_clients >= MAX_CLIENTS) {
                 printf("Maximum clients reached\n");
                 close(client_socket);
    -            continue;
    +
    +            pthread_t thread_id;
    +            int *new_client_socket = malloc(sizeof(int));
    +            *new_client_socket = client_socket;
    +            pthread_create(&thread_id, NULL, handle_client, (void *) new_client_socket);
             }
     
    -        client_sockets[num_clients] = client_socket;
    -        num_clients++;
    -
    -        pthread_t thread_id;
    -        pthread_create(&thread_id, NULL, handle_client, (void *) &client_socket);
    +    client_sockets[num_clients] = *new_client_socket;
    +    num_clients++;
    +    free(new_client_socket);
         }
     
         return 0;
    
    