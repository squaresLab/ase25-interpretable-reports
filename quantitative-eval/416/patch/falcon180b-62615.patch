 
    
    --- falcon180b-62615.c
    +++ falcon180b-62615-fixed.c
    @@ -22,6 +22,7 @@
     #define MAX_CLIENTS 10
     #define SERVER_PORT 8080
     #define BUFFER_SIZE 1024
    
    +pthread_mutex_t clients_mutex = PTHREAD_MUTEX_INITIALIZER;
     int clients[MAX_CLIENTS];
     int num_clients = 0;
    
    @@ -39,7 +40,7 @@
            continue;
        }
    
    +    pthread_mutex_lock(&clients_mutex);
        clients[num_clients] = client_socket;
        num_clients++;
    +    pthread_mutex_unlock(&clients_mutex);
    
        pthread_t thread_id;
        pthread_create(&thread_id, NULL, handle_client, (void *) &client_socket);
    @@ -62,9 +63,11 @@
    
        close(client_socket);
    +    pthread_mutex_lock(&clients_mutex);
        // Remove client from list
        for (int i = 0; i < num_clients; i++) {
            if (clients[i] == client_socket) {
                clients[i] = clients[num_clients - 1];
                num_clients--;
                break;
            }
        }
    +    pthread_mutex_unlock(&clients_mutex);
        return NULL;
     }
    
    