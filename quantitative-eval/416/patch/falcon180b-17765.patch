 

21c21
-        int bytes_received = recv(client_socket, buffer, BUFFER_SIZE, 0);
+        int bytes_received = recv(client_socket, buffer, BUFFER_SIZE - 1, 0);
22a22
+        if (bytes_received < 0) {
+            perror("recv");
+            close(client_socket);
+            pthread_exit(0);
+        }
+        buffer[bytes_received] = '\0';

29c29
-                send(client_sockets[i], buffer, strlen(buffer), 0);
+                send(client_sockets[i], buffer, bytes_received, 0);

