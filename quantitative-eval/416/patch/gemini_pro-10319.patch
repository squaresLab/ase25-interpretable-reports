 

diff --git a/gemini_pro-10319 b/gemini_pro-10319
index a1b2c3d..e4f5g6h 100644
--- a/gemini_pro-10319
+++ b/gemini_pro-10319
@@ -40,14 +40,19 @@ int main() {
     printf("Server is up and running, waiting for connections...\n");
 
     // Handle incoming connections in separate threads
-    int client_socket;
+    int client_socket;
     pthread_t thread;
+    
     while ((client_socket = accept(server_socket, NULL, NULL)) != -1) {
-        if (pthread_create(&thread, NULL, handle_connection, (void*)&client_socket) != 0) {
+        int *client_sock_ptr = malloc(sizeof(int));
+        *client_sock_ptr = client_socket;
+        if (pthread_create(&thread, NULL, handle_connection, client_sock_ptr) != 0) {
             perror("Failed to create thread");
             return 1;
         }
         pthread_detach(thread);
+        client_sock_ptr = NULL;
+        free(client_sock_ptr);
     }
 
     // Close the server socket

