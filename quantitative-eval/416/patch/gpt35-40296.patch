 
diff --git a/gpt35-40296 b/gpt35-40296
index e69de29..b6b5d78 100644
--- a/gpt35-40296
+++ b/gpt35-40296
@@ -40,7 +40,7 @@ int main(){
         socklen_t clilen = sizeof(client_addr);
         int client_sock = accept(server_sock, (struct sockaddr *)&client_addr, &clilen);
         if(client_sock < 0){
             printf("Failed to accept");
             continue;
         }
         pthread_t tid;
-        if(pthread_create(&tid, NULL, handle_connection, &client_sock) != 0){
+        int *new_sock = malloc(sizeof(int));
+        if (new_sock == NULL) {
+            printf("Memory allocation failed");
+            continue;
+        }
+        *new_sock = client_sock;
+        if(pthread_create(&tid, NULL, handle_connection, new_sock) != 0){
             printf("Failed to create thread");
             free(new_sock);
             continue;
         }
         pthread_detach(tid);
     }

