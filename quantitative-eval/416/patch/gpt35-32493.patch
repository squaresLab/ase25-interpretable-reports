 

#include <stdio.h>
#include <stdlib.h>
+ #include <limits.h>

void dots(int num) {
    for (int i = 0; i < num; i++) {
        printf(".");
    }
}

void line(int num) {
    printf("+");
    dots(num);
    printf("+\n");
}

void rect(int width, int height) {
+    if (width <= 0 || height <= 0) {
+        printf("Invalid dimensions for rectangle.\n");
+        return;
+    }
    line(width);
    for (int i = 0; i < height; i++) {
        printf("|");
        dots(width);
        printf("|\n");
    }
    line(width);
}

void triangle(int size) {
+    if (size <= 0) {
+        printf("Invalid size for triangle.\n");
+        return;
+    }
    for (int i = 1; i <= size; i++) {
        dots(size-i);
        printf("/");
        dots(i*2-2);
        printf("\\\n");
    }
    line(size*2);
}

void diamond(int size) {
+    if (size <= 0) {
+        printf("Invalid size for diamond.\n");
+        return;
+    }
    for (int i = 1; i <= size-1; i++) {
        dots(size-i);
        printf("/");
        dots(i*2-2);
        printf("\\\n");
    }
    line(size*2);
    for (int j = size-1; j > 0; j--) {
        dots(size-j);
        printf("\\");
        dots(j*2-2);
        printf("/\n");
    }
    line(size*2);
}

int main() {
    int choice;

    printf("Choose a shape:\n");
    printf("1. Rectangle\n");
    printf("2. Triangle\n");
    printf("3. Diamond\n");
    scanf("%d", &choice);

+    if (choice < 1 || choice > 3) {
+        printf("Invalid choice.\n");
+        return 1;
+    }

    switch(choice) {
        case 1:
            printf("Enter width and height of rectangle:\n");
            int width, height;
            scanf("%d %d", &width, &height);
+            if (width <= 0 || height <= 0 || width > INT_MAX || height > INT_MAX) {
+                printf("Invalid dimensions.\n");
+                return 1;
+            }
            rect(width, height);
            break;
        case 2:
            printf("Enter size of triangle:\n");
            int size;
            scanf("%d", &size);
+            if (size <= 0 || size > INT_MAX) {
+                printf("Invalid size.\n");
+                return 1;
+            }
            triangle(size);
            break;
        case 3:
            printf("Enter size of diamond:\n");
            scanf("%d", &size);
+            if (size <= 0 || size > INT_MAX) {
+                printf("Invalid size.\n");
+                return 1;
+            }
            diamond(size);
            break;
        default:
            printf("Invalid choice.");
            return 1;
    }

    return 0;
}

