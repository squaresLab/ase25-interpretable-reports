

diff --git a/falcon180b-4088 b/falcon180b-4088
index 1234567..89abcde 100644
--- a/falcon180b-4088
+++ b/falcon180b-4088
@@ -14,10 +14,18 @@ void *handle_client(void *arg) {
 
     while (1) {
         memset(buffer, 0, BUFFER_SIZE);
-        recv(client_socket, buffer, BUFFER_SIZE, 0);
+        ssize_t received = recv(client_socket, buffer, BUFFER_SIZE - 1, 0);
 
-        if (strcmp(buffer, "ON") == 0) {
+        if(received <= 0) {
+            break;
+        }
+        buffer[received] = '\0';  // Null-terminate the buffer
+
+        if (strncmp(buffer, "ON", BUFFER_SIZE) == 0) {
             strncpy(response, "Lights turned on.", BUFFER_SIZE);
-        } else if (strcmp(buffer, "OFF") == 0) {
+            response[BUFFER_SIZE - 1] = '\0';
+        } else if (strncmp(buffer, "OFF", BUFFER_SIZE) == 0) {
             strncpy(response, "Lights turned off.", BUFFER_SIZE);
+            response[BUFFER_SIZE - 1] = '\0';
+        } else {
+            strncpy(response, "Invalid command.", BUFFER_SIZE);
+            response[BUFFER_SIZE - 1] = '\0';
         }
 
         send(client_socket, response, strlen(response), 0);


