 
  
    --- gemini_pro-9974
    +++ gemini_pro-9974
    @@ -23,7 +23,8 @@
         pthread_create(&drone_threads[i], NULL, drone_control, (void *)&i);
     }

    + // Ensure unique thread identifiers
    + int drone_ids[NUM_DRONES];
     // Wait for drone control threads to finish
     for (int i = 0; i < NUM_DRONES; i++) {
         pthread_join(drone_threads[i], NULL);
     }

     // Initialize shared data variables
     for (int i = 0; i < NUM_DRONES; i++) {
         drone_altitudes[i] = 0;
    +    drone_ids[i] = i;
     }

    -    pthread_create(&drone_threads[i], NULL, drone_control, (void *)&i);
    +    pthread_create(&drone_threads[i], NULL, drone_control, (void *)&drone_ids[i]);

    @@@@@@ -26,7 +26,6 @@@@@@
     while (1) {
         // Randomly adjust drone altitude
        pthread_mutex_lock(&altitude_lock);
    -   drone_altitudes[drone_id] += rand() % 10 - 5;
    +   int alt_change = rand() % 10 - 5;
    +   drone_altitudes[drone_id] += alt_change;
        printf("Drone %d: Altitude: %d\n", drone_id, drone_altitudes[drone_id]);
        pthread_mutex_unlock(&altitude_lock);

       // Sleep for a while
        sleep(1);
     }


