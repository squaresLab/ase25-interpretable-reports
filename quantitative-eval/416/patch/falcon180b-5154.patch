 

24    while (1) {
25        memset(buffer, 0, BUFFER_SIZE);
26        int bytes_received = recv(client_socket, buffer, BUFFER_SIZE, 0);

27        if (bytes_received <= 0) {
-            close(client_socket);
-            pthread_exit(NULL);
+           break;
28       }

29       send(client_socket, buffer, strlen(buffer), 0);
30   }

+   close(client_socket);
+   pthread_exit(NULL);

