 

11c11,18
<     char buf[1024];
---
>     char buf[1024];
>     char safe_buf[1024];
>     int len;
16c16,18
<         fgets(buf, sizeof(buf), stdin);
<         send(sockfd, buf, strlen(buf), 0);
---
>         if (fgets(buf, sizeof(buf), stdin) != NULL) {
>             len = strlen(buf);
>             if (buf[len-1] == '\n') buf[len-1] = '\0';
>             send(sockfd, buf, len, 0);
>         }

24c26
< void handle_client(int sockfd) {
---
> void handle_client(int sockfd) {
>      char buf[1024];    // Added a buffer for the string
>      int n;
>      while (1) {
>          n = recv(sockfd, buf, sizeof(buf)-1, 0); // Ensure null-termination space
>          if (n <= 0) {
>              close(sockfd);
>              return;
>          }
>          buf[n] = '\0'; // Null-terminate the received string
>          printf("Received message: %s\n", buf);  // Added newline to avoid buffer overflow


