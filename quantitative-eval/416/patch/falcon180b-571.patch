 

--- a/falcon180b-571
+++ b/falcon180b-571
@@ -15,11 +15,16 @@ void *handle_client(void *client_socket) {
         memset(buffer, 0, MAX_MESSAGE_SIZE);
         int bytes_received = recv(client_socket_copy, buffer, MAX_MESSAGE_SIZE, 0);
 
         if (bytes_received <= 0) {
             close(client_socket_copy);
+            // Remove client from list
+            for (int i = 0; i < client_count; i++) {
+                if (clients[i] == client_socket_copy) {
+                    clients[i] = clients[--client_count];
+                    break;
+                }
+            }
             pthread_exit(NULL);
         }
 
         printf("Client %d sent message: %s\n", client_socket_copy, buffer);
 
@@ -27,7 +32,12 @@ void *handle_client(void *client_socket) {
         for (int i = 0; i < client_count; i++) {
             if (clients[i] != client_socket_copy) {
-                send(clients[i], buffer, strlen(buffer), 0);
+                int bytes_sent = send(clients[i], buffer, strlen(buffer), 0);
+                if (bytes_sent < 0) {
+                    perror("send");
+                    close(clients[i]);
+                    clients[i] = clients[--client_count];
+                }
             }
         }
     }
 }

