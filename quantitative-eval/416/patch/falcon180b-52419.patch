 

diff --git a/falcon180b-52419 b/falcon180b-52419
index 1234567..abcdefg 100644
--- a/falcon180b-52419
+++ b/falcon180b-52419
@@ -19,11 +19,20 @@ void *handle_client(void *arg) {
    int client_socket = *(int *) arg;
    char buffer[BUFFER_SIZE];

+   pthread_detach(pthread_self());
+
    while (1) {
        memset(buffer, 0, BUFFER_SIZE);
        int bytes_received = recv(client_socket, buffer, BUFFER_SIZE, 0);

        if (bytes_received <= 0) {
+           close(client_socket);
            pthread_exit(0);
        }

        send(client_socket, buffer, bytes_received, 0);
    }
 }
 
 void accept_connections() {
@@ -34,11 +43,13 @@ void accept_connections() {
         int client_socket = accept(server_socket, NULL, NULL);

         if (client_socket == -1) {
            continue;
         }

         if (num_clients >= MAX_CLIENTS) {
+            close(client_socket);
             continue;
         }

         client_sockets[num_clients] = client_socket;
         num_clients++;
@@ -48,6 +59,10 @@ void accept_connections() {
         pthread_create(&thread_id, NULL, handle_client, (void *) &client_socket);
     }
}
 
int main() {
+    server_socket = socket(AF_INET, SOCK_STREAM, 0);
+    if (server_socket == -1) {
+        perror("socket");
+        exit(EXIT_FAILURE);
+    }
    
     int opt = 1;
     setsockopt(server_socket, SOL_SOCKET, SO_REUSEADDR, (char *) &opt, sizeof(opt));

     struct sockaddr_in server_addr;


