 

int client_socket = *(int *) arg;
char buffer[1024];
while (1) {
    memset(buffer, 0, sizeof(buffer));
    ssize_t bytes_received = recv(client_socket, buffer, sizeof(buffer) - 1, 0);
-    if (bytes_received <= 0) {
+    if (bytes_received <= 0 || bytes_received >= sizeof(buffer)) {
        break;
    }
+    buffer[bytes_received] = '\0';
    printf("Client %d says: %s\n", client_socket, buffer);
    for (int i = 0; i < num_clients; i++) {
        if (clients[i] != client_socket) {
            send(clients[i], buffer, strlen(buffer), 0);
        }
    }
}

